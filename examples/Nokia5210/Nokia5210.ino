// Arduino code to control a Nokia 5210 LCD

#include <SPI.h>
#include <Adafruit_GFX.h>
#include <Adafruit_PCD8544.h>

// pin 3 - Serial clock out (SCLK)
// pin 4 - Serial data out (DIN)
// pin 5 - Data/Command select (D/C)
// pin 6 - LCD chip select (CS)
// pin 7 - LCD reset (RST)
Adafruit_PCD8544 display = Adafruit_PCD8544(3, 4, 5, 6, 7);

const static unsigned char PROGMEM windmill_1[] = {
   0x00, 0x10, 0x00, 0x00, 0x00, 0x10, 0x00, 0x00, 0x00, 0x18, 0x00, 0x00,
   0x00, 0x18, 0x00, 0x00, 0x00, 0x18, 0x00, 0x00, 0x00, 0x1c, 0x00, 0x00,
   0x00, 0x18, 0x00, 0x00, 0x00, 0x10, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x00, 0x30, 0x00, 0x00, 0x00, 0xb0, 0x0f, 0x00, 0x00, 0x06, 0x1f, 0x00,
   0xc0, 0x33, 0x3c, 0x00, 0xf0, 0x33, 0xe0, 0x00, 0x7c, 0x30, 0x80, 0x01,
   0x00, 0x30, 0x00, 0x00, 0x00, 0x30, 0x00, 0x00, 0x00, 0x30, 0x00, 0x00,
   0x00, 0x30, 0x00, 0x00, 0x00, 0x30, 0x00, 0x00, 0x00, 0x30, 0x00, 0x00,
   0x00, 0x30, 0x00, 0x00 };
   
const static unsigned char PROGMEM windmill_2[] = {   
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x20, 0x00,
   0x00, 0x00, 0x1c, 0x00, 0x00, 0x00, 0x0f, 0x00, 0x00, 0x80, 0x07, 0x00,
   0x00, 0xc0, 0x03, 0x00, 0x00, 0xc0, 0x00, 0x00, 0x0f, 0x40, 0x00, 0x00,
   0xfc, 0x37, 0x00, 0x00, 0xf0, 0x33, 0x00, 0x00, 0x00, 0x40, 0x00, 0x00,
   0x00, 0xf0, 0x00, 0x00, 0x00, 0xf0, 0x03, 0x00, 0x00, 0xb0, 0x03, 0x00,
   0x00, 0xb0, 0x03, 0x00, 0x00, 0x30, 0x03, 0x00, 0x00, 0x30, 0x03, 0x00,
   0x00, 0x30, 0x02, 0x00, 0x00, 0x30, 0x02, 0x00, 0x00, 0x30, 0x00, 0x00,
   0x00, 0x30, 0x00, 0x00 };
   
const static unsigned char PROGMEM windmill_3[] = {   
   0x00, 0x00, 0x00, 0x00, 0x10, 0x00, 0x00, 0x00, 0x30, 0x00, 0x00, 0x00,
   0x60, 0x00, 0x00, 0x00, 0xe0, 0x00, 0x00, 0x00, 0xc0, 0x01, 0x00, 0x00,
   0xc0, 0x03, 0x00, 0x00, 0x80, 0x07, 0xfe, 0x03, 0x00, 0x80, 0x7f, 0x00,
   0x00, 0xb0, 0x00, 0x00, 0x00, 0x30, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x00, 0x38, 0x00, 0x00, 0x00, 0x38, 0x00, 0x00, 0x00, 0x3c, 0x00, 0x00,
   0x00, 0x3c, 0x00, 0x00, 0x00, 0x3e, 0x00, 0x00, 0x00, 0x36, 0x00, 0x00,
   0x00, 0x33, 0x00, 0x00, 0x00, 0x30, 0x00, 0x00, 0x00, 0x30, 0x00, 0x00,
   0x00, 0x30, 0x00, 0x00 };

   

void setup()   {
  // Use pin 12 as LCD power
  //pinMode(0, OUTPUT);
  //digitalWrite(0, HIGH);
  
  Serial.begin(9600);
  Serial.print("TTEEEEESSSTT");

  display.begin();
  // init done

  // you can change the contrast around to adapt the display
  // for the best viewing!
  display.setContrast(50);


  display.clearDisplay();   // clears the screen and buffer
  
  // Battery
  display.drawRect(38, 0, 8, 4, BLACK);
  display.drawRect(36, 3, 12, 16, BLACK);
  display.fillRect(38, 14, 8, 3, BLACK);
  display.fillRect(38, 10, 8, 3, BLACK);
  
  // Put on screen  
  display.display();
  
  // Windmill
  uint16_t millSpeed = 300;
  while (1) {
    display.fillRect(0, 0, 26, 22, WHITE);
    display.drawXBitmap(0, 0, windmill_1, 26, 22, 1);
    display.display();
    delay(millSpeed);
    display.fillRect(0, 0, 26, 22, WHITE);
    display.drawXBitmap(0, 0, windmill_2, 26, 22, 1);
    display.display();
    delay(millSpeed);
    display.fillRect(0, 0, 26, 22, WHITE);
    display.drawXBitmap(0, 0, windmill_3, 26, 22, 1);
    display.display();
    delay(millSpeed);
  }


}


void loop() {
  
}
